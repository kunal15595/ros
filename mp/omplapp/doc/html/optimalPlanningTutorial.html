<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Optimal Planning Tutorial</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Ioan A. È˜ucan, Mark Moll, Lydia E. Kavraki">
  <link href="../css/tabs.css" rel="stylesheet">
  <link href="../css/doxygen.css" rel="stylesheet">
  <link href="../css/search.css" rel="stylesheet">
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/bootstrap-theme.min.css" rel="stylesheet">
  <link href="../css/ompl.css" rel="stylesheet">
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <script src="search/search.js"></script>
</head>
<body>
  <nav class="navbar navbar-inverse navbar-fixed-top" id="top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="./index.html">OMPL</a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="download.html">Download</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="http://ompl.kavrakilab.org/OMPL_Primer.pdf">Primer</a></li>
              <li><a href="installation.html">Installation</a></li>
              <li><a href="tutorials.html">Tutorials</a></li>
              <li><a href="group__demos.html">Demos</a></li>
              <li><a href="gui.html">OMPL.app GUI</a></li>
              <li><a href="python.html">Python Bindings</a></li>
              <li><a href="planners.html">Available Planners</a></li>
              <li><a href="spaces.html">Available State Spaces</a></li>
              <li><a href="optimalPlanning.html">Optimal Planning</a></li>
              <li><a href="FAQ.html">FAQ</a></li>
              <li class="divider"></li>
              <li>&nbsp;<em>External links:</em></li>
              <li><a href="http://moveit.ros.org">MoveIt!</a></li>
              <li><a href="http://robotics.naist.jp/edu/text/?Robotics%2FOMPL">Japanese Introduction to OMPL</a></li>
              <li><a href="http://robotics.naist.jp/edu/text/?Robotics%2FExercise%2FOMPLProgramming">Japanese OMPL Tutorial</a></li>
              <li><a href="http://moveit.ros.org/wiki/Tutorials/ICRA2013">ICRA 2013 Tutorial</a></li>
              <li><a href="http://kavrakilab.org/OMPLtutorial">IROS 2011 Tutorial</a></li>
            </ul>
          </li>
          <li><a href="gallery.html">Gallery</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Code <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="api_overview.html">API Overview</a></li>
              <li><a href="annotated.html">Classes</a></li>
              <li><a href="files.html">Files</a></li>
              <li><a href="styleGuide.html">Style Guide</a></li>
              <li><a href="https://bitbucket.org/ompl/ompl/src">Browse Repository</a></li>
              <li><a href="teamcity.html">TeamCity Build Server</a></li>
            </ul>
          </li>
          <li><a href="https://bitbucket.org/ompl/ompl/issues?status=new&status=open">Issues</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="mailingLists.html">Mailing Lists</a></li>
              <li><a href="developers.html">Developers</a></li>
              <li><a href="thirdparty.html">Contributions</a></li>
              <li><a href="contrib.html">Submit Contribution</a></li>
              <li><a href="education.html">Education</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="license.html">License</a></li>
              <li><a href="citations.html">Citations</a></li>
              <li><a href="acknowledgements.html">Acknowledgments</a></li>
              <li><a href="contact.html">Contact Us</a></li>
            </ul>
          </li>
          <li><a href="http://ompl.kavrakilab.org/blog/">Blog</a></li>
          <!-- Doxygen API search box -->
          <div id="searchli">
            <div id="MSearchBox" class="MSearchBoxInactive">
              <span class="left">
                <img id="MSearchSelect" src="search/mag_sel.png"
                onmouseover="return searchBox.OnSearchSelectShow()"
                onmouseout="return searchBox.OnSearchSelectHide()"
                alt=""/>
                <input type="text" id="MSearchField" value="Search API" accesskey="S"
                onfocus="searchBox.OnSearchFieldFocus(true)"
                onblur="searchBox.OnSearchFieldFocus(false)"
                onkeyup="searchBox.OnSearchFieldChange(event)"/>
              </span><span class="right">
                <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
              </span>
            </div>
          </div>
        </ul>
      </div>
    </div>
  </nav>
  <!-- window showing the filter options -->
  <div id="MSearchSelectWindow"
  onmouseover="return searchBox.OnSearchSelectShow()"
  onmouseout="return searchBox.OnSearchSelectHide()"
  onkeydown="return searchBox.OnSearchSelectKey(event)">
  <a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a></div>
  <!-- iframe showing the search results (closed by default) -->
  <div id="MSearchResultsWindow">
    <iframe src="" frameborder="0"name="MSearchResults" id="MSearchResults"></iframe>
  </div>
  <div class="container" role="main">
    <div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Optimal Planning Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Defining an optimal motion planning problem is almost exactly the same as defining a regular motion planning problem, with two main differences:</p>
<ol type="1">
<li>You need to specify an optimization objective to <code><a class="el" href="classompl_1_1base_1_1ProblemDefinition.html" title="Definition of a problem to be solved. This includes the start state(s) for the system and a goal spec...">ompl::base::ProblemDefinition</a></code>.</li>
<li>You need to use an optimizing planner for the actual motion planning.</li>
</ol>
<h2>Finding the shortest path</h2>
<p>We'll demonstrate OMPL's optimal planning framework with an example. In this example, our robot is represented as a (x,y) coordinate on a square, where (0,0) is the square's bottom-left corner and (1,1) is the square's top-right corner. There is also an obstacle in this square that the robot cannot pass through; this obstacle is a circle of radius 0.25 centered at (0.5,0.5). To reflect this environment, we use a two-dimensional <code><a class="el" href="classompl_1_1base_1_1RealVectorStateSpace.html" title="A state space representing Rn. The distance function is the L2 norm. ">ompl::base::RealVectorStateSpace</a></code> and define our state validity checker as follows:</p>
<div class="fragment"><div class="line"><span class="comment">// Our collision checker. For this demo, our robot&#39;s state space</span></div>
<div class="line"><span class="comment">// lies in [0,1]x[0,1], with a circular obstacle of radius 0.25</span></div>
<div class="line"><span class="comment">// centered at (0.5,0.5). Any states lying in this circular region are</span></div>
<div class="line"><span class="comment">// considered &quot;in collision&quot;.</span></div>
<div class="line"><span class="keyword">class </span>ValidityChecker : <span class="keyword">public</span> <a class="code" href="classompl_1_1base_1_1StateValidityChecker.html">ob::StateValidityChecker</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    ValidityChecker(<span class="keyword">const</span> <a class="code" href="classompl_1_1base_1_1SpaceInformationPtr.html">ob::SpaceInformationPtr</a>&amp; si) :</div>
<div class="line">        ob::StateValidityChecker(si) {}</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Returns whether the given state&#39;s position overlaps the</span></div>
<div class="line">    <span class="comment">// circular obstacle</span></div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code" href="classompl_1_1base_1_1StateValidityChecker.html#a1e70a8c8c51e42c81408c5eae6108a4b">isValid</a>(<span class="keyword">const</span> <a class="code" href="classompl_1_1base_1_1State.html">ob::State</a>* state)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classompl_1_1base_1_1StateValidityChecker.html#ace757aae9b83a50621b2513a3dd33fdb">clearance</a>(state) &gt; 0.0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Returns the distance from the given state&#39;s position to the</span></div>
<div class="line">    <span class="comment">// boundary of the circular obstacle.</span></div>
<div class="line">    <span class="keywordtype">double</span> <a class="code" href="classompl_1_1base_1_1StateValidityChecker.html#ace757aae9b83a50621b2513a3dd33fdb">clearance</a>(<span class="keyword">const</span> <a class="code" href="classompl_1_1base_1_1State.html">ob::State</a>* state)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="comment">// We know we&#39;re working with a RealVectorStateSpace in this</span></div>
<div class="line">        <span class="comment">// example, so we downcast state into the specific type.</span></div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="classompl_1_1base_1_1StateSpace.html#aa995357fedb73879bc7f0bb946db76d1">ob::RealVectorStateSpace::StateType</a>* state2D =</div>
<div class="line">            state-&gt;<a class="code" href="classompl_1_1base_1_1State.html#a04177157c4ea22d1bb2d7f344162bf31">as</a>&lt;<a class="code" href="classompl_1_1base_1_1StateSpace.html#aa995357fedb73879bc7f0bb946db76d1">ob::RealVectorStateSpace::StateType</a>&gt;();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Extract the robot&#39;s (x,y) position from its state</span></div>
<div class="line">        <span class="keywordtype">double</span> x = state2D-&gt;values[0];</div>
<div class="line">        <span class="keywordtype">double</span> y = state2D-&gt;values[1];</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Distance formula between two points, offset by the circle&#39;s</span></div>
<div class="line">        <span class="comment">// radius</span></div>
<div class="line">        <span class="keywordflow">return</span> sqrt((x-0.5)*(x-0.5) + (y-0.5)*(y-0.5)) - 0.25;</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><p>In our planning code, we then define our state space, its bounds, and our start and goal states. In this example, the start state is at (0,0) and our goal state is (1,1) - i.e. the bottom-left and top-right corners, respectively. This code should be familiar if you've worked with regular motion planning in OMPL.</p>
<div class="fragment"><div class="line"><span class="comment">// Construct the robot state space in which we&#39;re planning. We&#39;re</span></div>
<div class="line"><span class="comment">// planning in [0,1]x[0,1], a subset of R^2.</span></div>
<div class="line"><a class="code" href="classompl_1_1base_1_1StateSpacePtr.html">ob::StateSpacePtr</a> space(<span class="keyword">new</span> <a class="code" href="classompl_1_1base_1_1RealVectorStateSpace.html">ob::RealVectorStateSpace</a>(2));</div>
<div class="line"></div>
<div class="line"><span class="comment">// Set the bounds of space to be in [0,1].</span></div>
<div class="line">space-&gt;as&lt;<a class="code" href="classompl_1_1base_1_1RealVectorStateSpace.html">ob::RealVectorStateSpace</a>&gt;()-&gt;setBounds(0.0, 1.0);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Construct a space information instance for this state space</span></div>
<div class="line"><a class="code" href="classompl_1_1base_1_1SpaceInformationPtr.html">ob::SpaceInformationPtr</a> si(<span class="keyword">new</span> <a class="code" href="classompl_1_1base_1_1SpaceInformation.html">ob::SpaceInformation</a>(space));</div>
<div class="line"></div>
<div class="line"><span class="comment">// Set the object used to check which states in the space are valid</span></div>
<div class="line">si-&gt;<a class="code" href="classompl_1_1base_1_1SpaceInformation.html#a0449ec0893e02aca2bdfc63323b624e5">setStateValidityChecker</a>(<a class="code" href="classompl_1_1base_1_1StateValidityCheckerPtr.html">ob::StateValidityCheckerPtr</a>(<span class="keyword">new</span> ValidityChecker(si)));</div>
<div class="line"></div>
<div class="line">si-&gt;<a class="code" href="classompl_1_1base_1_1SpaceInformation.html#a6e8c41f946c3c04d126983e145404ad4">setup</a>();</div>
<div class="line"></div>
<div class="line"><span class="comment">// Set our robot&#39;s starting state to be the bottom-left corner of</span></div>
<div class="line"><span class="comment">// the environment, or (0,0).</span></div>
<div class="line"><a class="code" href="classompl_1_1base_1_1ScopedState.html">ob::ScopedState&lt;&gt;</a> start(space);</div>
<div class="line">start-&gt;as&lt;<a class="code" href="classompl_1_1base_1_1StateSpace.html#aa995357fedb73879bc7f0bb946db76d1">ob::RealVectorStateSpace::StateType</a>&gt;()-&gt;values[0] = 0.0;</div>
<div class="line">start-&gt;<a class="code" href="classompl_1_1base_1_1State.html#a04177157c4ea22d1bb2d7f344162bf31">as</a>&lt;<a class="code" href="classompl_1_1base_1_1StateSpace.html#aa995357fedb73879bc7f0bb946db76d1">ob::RealVectorStateSpace::StateType</a>&gt;()-&gt;values[1] = 0.0;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Set our robot&#39;s goal state to be the top-right corner of the</span></div>
<div class="line"><span class="comment">// environment, or (1,1).</span></div>
<div class="line"><a class="code" href="classompl_1_1base_1_1ScopedState.html">ob::ScopedState&lt;&gt;</a> goal(space);</div>
<div class="line">goal-&gt;as&lt;<a class="code" href="classompl_1_1base_1_1StateSpace.html#aa995357fedb73879bc7f0bb946db76d1">ob::RealVectorStateSpace::StateType</a>&gt;()-&gt;values[0] = 1.0;</div>
<div class="line">goal-&gt;<a class="code" href="classompl_1_1base_1_1State.html#a04177157c4ea22d1bb2d7f344162bf31">as</a>&lt;<a class="code" href="classompl_1_1base_1_1StateSpace.html#aa995357fedb73879bc7f0bb946db76d1">ob::RealVectorStateSpace::StateType</a>&gt;()-&gt;values[1] = 1.0;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Create a problem instance</span></div>
<div class="line"><a class="code" href="classompl_1_1base_1_1ProblemDefinitionPtr.html">ob::ProblemDefinitionPtr</a> pdef(<span class="keyword">new</span> <a class="code" href="classompl_1_1base_1_1ProblemDefinition.html">ob::ProblemDefinition</a>(si));</div>
<div class="line"></div>
<div class="line"><span class="comment">// Set the start and goal states</span></div>
<div class="line">pdef-&gt;setStartAndGoalStates(start, goal);</div>
</div><!-- fragment --><p>Next, we want to define an <code><a class="el" href="classompl_1_1base_1_1OptimizationObjective.html" title="Abstract definition of optimization objectives. ">ompl::base::OptimizationObjective</a></code> for optimal planning. For now, we can specify an objective that corresponds to finding the shortest path between the start and goal states. We'll define another function that returns this particular objective:</p>
<div class="fragment"><div class="line"><span class="comment">// Returns a structure representing the optimization objective to use</span></div>
<div class="line"><span class="comment">// for optimal motion planning. This method returns an objective which</span></div>
<div class="line"><span class="comment">// attempts to minimize the length in configuration space of computed</span></div>
<div class="line"><span class="comment">// paths.</span></div>
<div class="line"><a class="code" href="classompl_1_1base_1_1OptimizationObjectivePtr.html">ob::OptimizationObjectivePtr</a> getPathLengthObjective(<span class="keyword">const</span> <a class="code" href="classompl_1_1base_1_1SpaceInformationPtr.html">ob::SpaceInformationPtr</a>&amp; si)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="classompl_1_1base_1_1OptimizationObjectivePtr.html">ob::OptimizationObjectivePtr</a>(<span class="keyword">new</span> <a class="code" href="classompl_1_1base_1_1PathLengthOptimizationObjective.html">ob::PathLengthOptimizationObjective</a>(si));</div>
<div class="line">}</div>
</div><!-- fragment --><p>We can then set this as our objective in our planning code:</p>
<div class="fragment"><div class="line">pdef-&gt;setOptimizationObjective(getPathLengthObjective(si));</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Note: The optimizing planner we're about to use, <code><a class="el" href="classompl_1_1geometric_1_1RRTstar.html" title="Optimal Rapidly-exploring Random Trees. ">ompl::geometric::RRTstar</a></code>, actually defaults to optimizing for path length if no optimization objective is specified to the <code><a class="el" href="classompl_1_1base_1_1ProblemDefinition.html" title="Definition of a problem to be solved. This includes the start state(s) for the system and a goal spec...">ompl::base::ProblemDefinition</a></code>. This means that, in this case, the above statement isn't required. But if you want to optimize a metric other than path length, you have to manually specify it to the <code><a class="el" href="classompl_1_1base_1_1ProblemDefinition.html" title="Definition of a problem to be solved. This includes the start state(s) for the system and a goal spec...">ompl::base::ProblemDefinition</a></code>.</p>
<p></p>
</blockquote>
<p>Next, we define our optimizing planner and attempt to solve the optimal planning problem:</p>
<div class="fragment"><div class="line"><span class="comment">// Construct our optimizing planner using the RRTstar algorithm.</span></div>
<div class="line"><a class="code" href="classompl_1_1base_1_1PlannerPtr.html">ob::PlannerPtr</a> optimizingPlanner(<span class="keyword">new</span> <a class="code" href="classompl_1_1geometric_1_1RRTstar.html">og::RRTstar</a>(si));</div>
<div class="line"></div>
<div class="line"><span class="comment">// Set the problem instance for our planner to solve</span></div>
<div class="line">optimizingPlanner-&gt;setProblemDefinition(pdef);</div>
<div class="line">optimizingPlanner-&gt;setup();</div>
<div class="line"></div>
<div class="line"><span class="comment">// attempt to solve the planning problem within one second of</span></div>
<div class="line"><span class="comment">// planning time</span></div>
<div class="line"><a class="code" href="structompl_1_1base_1_1PlannerStatus.html">ob::PlannerStatus</a> solved = optimizingPlanner-&gt;solve(1.0);</div>
</div><!-- fragment --><p>Here's an animation demonstrating the progress of the RRTstar planner on the problem we just defined:</p>
<div class="row"><div class="image">
<img src="../images/path-length.gif"  class="span8 offset1"/>
</div>
</div><p>Note that when attempting to solve the planning problem, we specify a time limit of 1 second. In regular motion planning, the planner will stop as soon as a path between the start and goal states has been found - this can take far less than 1 second of planning. However, if you execute this example you'll notice that the planner always takes the full planning time of 1 second. This is because optimizing planners have a stricter stopping requirement than regular planners. Regular planners stop when they've found a path from start to goal; on the other hand, optimizing planners stop when they've found a path from start to goal that <em>satisfies the optimization objective</em>.</p>
<h2>Specifying an optimality threshold</h2>
<p>What does satisfying an optimization objective mean? This behaviour can be customized, but by default, it means finding a path that passes some quality threshold. For shortest path planning, it means finding a path that is shorter than some given length. You'll notice we never specified this threshold; the default behaviour for <code><a class="el" href="classompl_1_1base_1_1PathLengthOptimizationObjective.html" title="An optimization objective which corresponds to optimizing path length. ">ompl::base::PathLengthOptimizationObjective</a></code> is to set the threshold to 0.0 if a threshold wasn't specified. This means that the objective is only satisfied by paths of length less than 0.0, which means this objective will never be satisfied! Our reasoning for doing this is that, if you don't specify a threshold, we assume that you want the planner to return the best possible path it can find in the time limit. Therefore, setting a threshold of 0.0 means that the objective will never be satisfied, and guarantee that the planner runs all the way until the specified time limit and returns the best path it could find.</p>
<p>We can create an <code>OptimizationObjective</code> with a quality threshold of 1.51 by using the <code>setCostThreshold</code> method: </p>
<div class="fragment"><div class="line"><a class="code" href="classompl_1_1base_1_1OptimizationObjectivePtr.html">ob::OptimizationObjectivePtr</a> getThresholdPathLengthObj(<span class="keyword">const</span> <a class="code" href="classompl_1_1base_1_1SpaceInformationPtr.html">ob::SpaceInformationPtr</a>&amp; si)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classompl_1_1base_1_1OptimizationObjectivePtr.html">ob::OptimizationObjectivePtr</a> obj(<span class="keyword">new</span> <a class="code" href="classompl_1_1base_1_1PathLengthOptimizationObjective.html">ob::PathLengthOptimizationObjective</a>(si));</div>
<div class="line">    obj-&gt;setCostThreshold(<a class="code" href="structompl_1_1base_1_1Cost.html">ob::Cost</a>(1.51));</div>
<div class="line">    <span class="keywordflow">return</span> obj;</div>
<div class="line">}</div>
</div><!-- fragment --><p>If you set this as the objective for the <code><a class="el" href="classompl_1_1base_1_1ProblemDefinition.html" title="Definition of a problem to be solved. This includes the start state(s) for the system and a goal spec...">ompl::base::ProblemDefinition</a></code> you'll find that the planner will terminate far more quickly, since it stops planning as soon as it has found a path shorter than the given threshold. Note that when calling <code><a class="el" href="classompl_1_1base_1_1OptimizationObjective.html#a1f133b98a94cb5b20c4b1a3a998aa7e9" title="Set the cost threshold for objective satisfaction. When a path is found with a cost better than the c...">ompl::base::OptimizationObjective::setCostThreshold</a></code>, we wrap our threshold value in an <code><a class="el" href="structompl_1_1base_1_1Cost.html" title="Definition of a cost value. Can represent the cost of a motion or the cost of a state. ">ompl::base::Cost</a></code> object. We'll talk more about the <code><a class="el" href="structompl_1_1base_1_1Cost.html" title="Definition of a cost value. Can represent the cost of a motion or the cost of a state. ">ompl::base::Cost</a></code> object later, but for now you can think of them as a wrapper for <code>double</code> values that represent the cost of a path. </p>
</div></div><!-- contents -->
</div>
<footer class="footer">
  <div class="container"><p>
    <a href="http://www.kavrakilab.org">Physical and Biological Computing Group</a> &bull;
    <a href="http://www.cs.rice.edu">Department of Computer Science</a> &bull;
    <a href="http://www.rice.edu">Rice University</a><br>
    <span class="gray">Generated on Tue Sep 2 2014 14:32:26 by&#160;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.6</span>
  </p></div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-9156598-2', 'auto');
  ga('send', 'pageview');
</script>
<script src="../js/jquery.js"></script>
<script src="../js/jquery.powertip.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/dynsections.js"></script>
<script src="../js/ompl.js"></script>
</body>
</html>
